# ServerHub v2.0 å¿«é€Ÿå¼€å§‹æŒ‡å—

æ¬¢è¿ä½¿ç”¨ServerHub v2.0ï¼æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹æ–°å¢çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## ğŸ“‹ ç›®å½•

1. [å¤‡ä»½ç®¡ç†](#å¤‡ä»½ç®¡ç†)
2. [è®¡åˆ’ä»»åŠ¡](#è®¡åˆ’ä»»åŠ¡)
3. [åº”ç”¨å•†åº—](#åº”ç”¨å•†åº—)
4. [æ’ä»¶å¼€å‘](#æ’ä»¶å¼€å‘)

---

## ğŸ” å¤‡ä»½ç®¡ç†

### åŠŸèƒ½æ¦‚è¿°
è‡ªåŠ¨åŒ–å¤‡ä»½ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ä»¶ã€æ•°æ®åº“ã€Dockerå®¹å™¨ç­‰å¤šç§å¤‡ä»½ç±»å‹ï¼Œå¯å°†å¤‡ä»½å­˜å‚¨åˆ°æœ¬åœ°æˆ–äº‘ç«¯ã€‚

### å¿«é€Ÿå¼€å§‹

#### 1. åˆ›å»ºå¤‡ä»½ç­–ç•¥

```bash
# å¯¼èˆªåˆ°å¤‡ä»½ç®¡ç†
åº”ç”¨ â†’ æ•°æ®ç®¡ç† â†’ å¤‡ä»½ç®¡ç† â†’ åˆ›å»ºå¤‡ä»½ç­–ç•¥
```

#### 2. é…ç½®å¤‡ä»½ç›®æ ‡

**æ–‡ä»¶å¤‡ä»½**:
```
ç±»å‹: æ–‡ä»¶/ç›®å½•
è·¯å¾„: /var/www/html
æ’é™¤: *.log, *.tmp
```

**æ•°æ®åº“å¤‡ä»½**:
```
ç±»å‹: æ•°æ®åº“
æ•°æ®åº“å: wordpress
ç±»å‹: MySQL/PostgreSQL/MongoDB
```

**Dockerå¤‡ä»½**:
```
ç±»å‹: Dockerå®¹å™¨
å®¹å™¨å: my-app
```

#### 3. é€‰æ‹©å­˜å‚¨ä½ç½®

**æœ¬åœ°å­˜å‚¨**:
```
ç±»å‹: æœ¬åœ°å­˜å‚¨
è·¯å¾„: /backup
```

**é˜¿é‡Œäº‘OSS**:
```
ç±»å‹: é˜¿é‡Œäº‘OSS
Bucket: my-backup-bucket
Access Key ID: ****
Secret Access Key: ****
åŒºåŸŸ: oss-cn-hangzhou
```

**AWS S3**:
```
ç±»å‹: AWS S3
Bucket: my-backup-bucket
Access Key ID: ****
Secret Access Key: ****
åŒºåŸŸ: us-east-1
```

#### 4. è®¾ç½®è°ƒåº¦

```
è°ƒåº¦ç±»å‹: æ¯æ—¥
æ—¶é—´: 02:00
ä¿ç•™ç­–ç•¥: ä¿ç•™æœ€è¿‘7ä¸ªå¤‡ä»½
```

#### 5. é«˜çº§é€‰é¡¹

```
âœ… å‹ç¼©: ä½¿ç”¨gzipå‹ç¼©
âœ… åŠ å¯†: AES-256åŠ å¯†
å¯†ç : ********
```

### æ¢å¤å¤‡ä»½

```bash
1. åœ¨"å¤‡ä»½è®°å½•"æ ‡ç­¾é¡µæ‰¾åˆ°è¦æ¢å¤çš„å¤‡ä»½
2. ç‚¹å‡»"æ¢å¤"æŒ‰é’®
3. é€‰æ‹©æ¢å¤ç›®æ ‡è·¯å¾„ï¼ˆç•™ç©ºä½¿ç”¨åŸè·¯å¾„ï¼‰
4. ç¡®è®¤æ¢å¤
```

### å¸¸è§é—®é¢˜

**Q: å¤‡ä»½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
```
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
   1. ç›®æ ‡è·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æœ‰æƒé™
   2. å­˜å‚¨ç©ºé—´æ˜¯å¦å……è¶³
   3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼ˆäº‘å­˜å‚¨ï¼‰
   4. æŸ¥çœ‹å¤‡ä»½æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
```

**Q: å¦‚ä½•æµ‹è¯•å¤‡ä»½æ˜¯å¦å¯ç”¨ï¼Ÿ**
```
A: å»ºè®®å®šæœŸè¿›è¡Œæ¢å¤æµ‹è¯•ï¼š
   1. é€‰æ‹©ä¸€ä¸ªå¤‡ä»½
   2. æ¢å¤åˆ°æµ‹è¯•ç›®å½•
   3. éªŒè¯æ•°æ®å®Œæ•´æ€§
```

---

## â° è®¡åˆ’ä»»åŠ¡

### åŠŸèƒ½æ¦‚è¿°
å¼ºå¤§çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œæ”¯æŒCronè¡¨è¾¾å¼å’Œå›ºå®šé—´éš”ï¼Œå¯æ‰§è¡ŒShellå‘½ä»¤ã€HTTPè¯·æ±‚ã€å¤‡ä»½ä»»åŠ¡ç­‰ã€‚

### å¿«é€Ÿå¼€å§‹

#### 1. åˆ›å»ºShellä»»åŠ¡

```bash
# å¯¼èˆªåˆ°è®¡åˆ’ä»»åŠ¡
åº”ç”¨ â†’ æ•°æ®ç®¡ç† â†’ è®¡åˆ’ä»»åŠ¡ â†’ åˆ›å»ºä»»åŠ¡
```

**é…ç½®ç¤ºä¾‹**:
```
ä»»åŠ¡åç§°: æ¸…ç†ä¸´æ—¶æ–‡ä»¶
ä»»åŠ¡ç±»å‹: Shellå‘½ä»¤
å‘½ä»¤: find /tmp -type f -mtime +7 -delete
å·¥ä½œç›®å½•: /tmp
è°ƒåº¦: Cronè¡¨è¾¾å¼
Cron: 0 3 * * *  (æ¯å¤©å‡Œæ™¨3ç‚¹)
```

#### 2. åˆ›å»ºHTTPä»»åŠ¡

```
ä»»åŠ¡åç§°: å¥åº·æ£€æŸ¥
ä»»åŠ¡ç±»å‹: HTTPè¯·æ±‚
URL: https://api.example.com/health
æ–¹æ³•: GET
è°ƒåº¦: å›ºå®šé—´éš”
é—´éš”: 300ç§’ (5åˆ†é’Ÿ)
```

#### 3. åˆ›å»ºå¤‡ä»½ä»»åŠ¡

```
ä»»åŠ¡åç§°: æ¯æ—¥æ•°æ®åº“å¤‡ä»½
ä»»åŠ¡ç±»å‹: å¤‡ä»½ä»»åŠ¡
å¤‡ä»½ç­–ç•¥: é€‰æ‹©å·²åˆ›å»ºçš„å¤‡ä»½ç­–ç•¥
è°ƒåº¦: Cronè¡¨è¾¾å¼
Cron: 0 2 * * *  (æ¯å¤©å‡Œæ™¨2ç‚¹)
```

### Cronè¡¨è¾¾å¼

#### å¸¸ç”¨è¡¨è¾¾å¼

```bash
# æ¯åˆ†é’Ÿ
* * * * *

# æ¯å°æ—¶
0 * * * *

# æ¯å¤©å‡Œæ™¨2ç‚¹
0 2 * * *

# æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹
0 3 * * 0

# æ¯æœˆ1å·å‡Œæ™¨4ç‚¹
0 4 1 * *

# æ¯6å°æ—¶
0 */6 * * *

# å·¥ä½œæ—¥æ—©ä¸Š9ç‚¹
0 9 * * 1-5
```

#### ä½¿ç”¨Cronæ„å»ºå™¨

```bash
1. ç‚¹å‡»Cronè¡¨è¾¾å¼è¾“å…¥æ¡†æ—çš„"æ„å»ºå™¨"æŒ‰é’®
2. ä½¿ç”¨å¯è§†åŒ–ç•Œé¢è®¾ç½®æ—¶é—´
3. æˆ–é€‰æ‹©é¢„è®¾è¡¨è¾¾å¼
4. ç‚¹å‡»"åº”ç”¨"
```

### æŸ¥çœ‹æ‰§è¡Œå†å²

```bash
1. åˆ‡æ¢åˆ°"æ‰§è¡Œå†å²"æ ‡ç­¾é¡µ
2. ç­›é€‰ä»»åŠ¡å’ŒçŠ¶æ€
3. ç‚¹å‡»"æŸ¥çœ‹è¾“å‡º"æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```

### é€šçŸ¥è®¾ç½®

```
âœ… æˆåŠŸæ—¶é€šçŸ¥
âœ… å¤±è´¥æ—¶é€šçŸ¥
é€šçŸ¥æ¸ é“: é‚®ä»¶/Webhook/ç³»ç»Ÿé€šçŸ¥
```

---

## ğŸª åº”ç”¨å•†åº—

### åŠŸèƒ½æ¦‚è¿°
ä¸€é”®éƒ¨ç½²å¸¸ç”¨åº”ç”¨ï¼Œæ”¯æŒWordPressã€MySQLã€Redisã€Nginxç­‰ï¼Œè‡ªåŠ¨é…ç½®Dockerå®¹å™¨ã€‚

### å¿«é€Ÿå¼€å§‹

#### 1. éƒ¨ç½²WordPress

```bash
# å¯¼èˆªåˆ°åº”ç”¨å•†åº—
åº”ç”¨ â†’ æ‰©å±• â†’ åº”ç”¨å•†åº— â†’ WordPress
```

**é…ç½®å‚æ•°**:
```
åº”ç”¨åç§°: my-wordpress
è®¿é—®ç«¯å£: 8080
æ•°æ®åº“å¯†ç : ********
ç®¡ç†å‘˜ç”¨æˆ·: admin
ç®¡ç†å‘˜å¯†ç : ********
```

**ç‚¹å‡»"éƒ¨ç½²"**ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆã€‚

**è®¿é—®åº”ç”¨**: `http://localhost:8080`

#### 2. éƒ¨ç½²MySQL

```
åº”ç”¨åç§°: my-mysql
è®¿é—®ç«¯å£: 3306
Rootå¯†ç : ********
æ•°æ®åº“å: mydb
```

#### 3. éƒ¨ç½²Redis

```
åº”ç”¨åç§°: my-redis
è®¿é—®ç«¯å£: 6379
å¯†ç : ********
```

### åº”ç”¨ç®¡ç†

#### å¯åŠ¨åº”ç”¨
```bash
å·²å®‰è£…åº”ç”¨ â†’ é€‰æ‹©åº”ç”¨ â†’ å¯åŠ¨
```

#### åœæ­¢åº”ç”¨
```bash
å·²å®‰è£…åº”ç”¨ â†’ é€‰æ‹©åº”ç”¨ â†’ åœæ­¢
```

#### å¸è½½åº”ç”¨
```bash
å·²å®‰è£…åº”ç”¨ â†’ é€‰æ‹©åº”ç”¨ â†’ å¸è½½
```

### æŸ¥çœ‹åº”ç”¨çŠ¶æ€

```bash
å·²å®‰è£…åº”ç”¨æ ‡ç­¾é¡µæ˜¾ç¤ºï¼š
- åº”ç”¨çŠ¶æ€ï¼ˆè¿è¡Œä¸­/å·²åœæ­¢ï¼‰
- èµ„æºä½¿ç”¨ï¼ˆCPU/å†…å­˜ï¼‰
- è®¿é—®åœ°å€
- ç«¯å£æ˜ å°„
```

### å¯ç”¨åº”ç”¨åˆ—è¡¨

| åº”ç”¨ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| WordPress | Webåº”ç”¨ | æµè¡Œçš„CMSç³»ç»Ÿ |
| MySQL | æ•°æ®åº“ | å…³ç³»å‹æ•°æ®åº“ |
| PostgreSQL | æ•°æ®åº“ | é«˜çº§å…³ç³»å‹æ•°æ®åº“ |
| MongoDB | æ•°æ®åº“ | NoSQLæ–‡æ¡£æ•°æ®åº“ |
| Redis | ç¼“å­˜ | å†…å­˜æ•°æ®åº“ |
| Nginx | WebæœåŠ¡å™¨ | é«˜æ€§èƒ½WebæœåŠ¡å™¨ |

---

## ğŸ”Œ æ’ä»¶å¼€å‘

### åŠŸèƒ½æ¦‚è¿°
å®Œæ•´çš„æ’ä»¶SDKï¼Œæ”¯æŒå¿«é€Ÿå¼€å‘ServerHubæ’ä»¶ï¼Œæ‰©å±•åº”ç”¨åŠŸèƒ½ã€‚

### å¿«é€Ÿå¼€å§‹

#### 1. å®‰è£…CLIå·¥å…·

```bash
cd packages/plugin-cli
npm install
npm link
```

#### 2. åˆ›å»ºæ’ä»¶

```bash
# ä½¿ç”¨äº¤äº’å¼å‘å¯¼
serverhub-plugin create

# æˆ–æŒ‡å®šæ¨¡æ¿
serverhub-plugin create --template=cloud-service my-plugin
```

#### 3. å¼€å‘æ’ä»¶

```bash
cd my-plugin
npm install
npm run dev
```

#### 4. æ’ä»¶ç»“æ„

```
my-plugin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â””â”€â”€ index.ts        # ä¸»è¿›ç¨‹ä»£ç 
â”‚   â””â”€â”€ renderer/
â”‚       â””â”€â”€ views/
â”‚           â””â”€â”€ Main.vue    # UIç•Œé¢
â”œâ”€â”€ plugin.json             # æ’ä»¶é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

#### 5. æ’ä»¶ç¤ºä¾‹

```typescript
// src/main/index.ts
import { Plugin, PluginContext } from '@serverhub/plugin-sdk'

export default class MyPlugin extends Plugin {
  constructor(context: PluginContext) {
    super(context)
  }

  async onLoad() {
    // æ³¨å†Œèœå•
    this.registerMenu({
      id: 'my-plugin-menu',
      label: 'æˆ‘çš„æ’ä»¶',
      icon: 'Star',
      route: '/plugin/my-plugin',
      position: 'sidebar'
    })

    // æ³¨å†Œè·¯ç”±
    this.registerRoute({
      path: '/plugin/my-plugin',
      name: 'MyPlugin',
      component: './views/Main.vue'
    })

    // æ³¨å†Œå·¥å…·
    this.registerTool({
      name: 'my_tool',
      displayName: 'æˆ‘çš„å·¥å…·',
      description: 'è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å·¥å…·',
      category: 'custom',
      parameters: {
        input: {
          type: 'string',
          description: 'è¾“å…¥å‚æ•°',
          required: true
        }
      },
      handler: async (params) => {
        return { result: `å¤„ç†: ${params.input}` }
      }
    })
  }

  async onEnable() {
    this.context.ui.showNotification('æ’ä»¶å·²å¯ç”¨', 'success')
  }
}
```

#### 6. æ„å»ºæ’ä»¶

```bash
npm run build
```

#### 7. æµ‹è¯•æ’ä»¶

```bash
npm test
```

### æ’ä»¶API

#### å­˜å‚¨API
```typescript
// ä¿å­˜æ•°æ®
await this.context.storage.set('key', 'value')

// è¯»å–æ•°æ®
const value = await this.context.storage.get('key')

// å®‰å…¨å­˜å‚¨ï¼ˆåŠ å¯†ï¼‰
await this.context.secureStorage.set('api_key', 'secret')
```

#### HTTP API
```typescript
// GETè¯·æ±‚
const response = await this.context.http.get('https://api.example.com')

// POSTè¯·æ±‚
const response = await this.context.http.post('https://api.example.com', {
  data: 'value'
})
```

#### UI API
```typescript
// æ˜¾ç¤ºé€šçŸ¥
this.context.ui.showNotification('æ“ä½œæˆåŠŸ', 'success')

// æ˜¾ç¤ºå¯¹è¯æ¡†
const result = await this.context.ui.showDialog({
  title: 'ç¡®è®¤',
  message: 'ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ',
  type: 'warning'
})

// æ˜¾ç¤ºç¡®è®¤æ¡†
const confirmed = await this.context.ui.showConfirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ')
```

#### Agent API
```typescript
// æ³¨å†ŒAgentå·¥å…·
this.registerAgentTool({
  name: 'my_agent_tool',
  displayName: 'æˆ‘çš„Agentå·¥å…·',
  description: 'è¿™æ˜¯ä¸€ä¸ªAgentå·¥å…·',
  category: 'custom',
  dangerous: false,
  parameters: {
    type: 'object',
    properties: {
      param: {
        type: 'string',
        description: 'å‚æ•°'
      }
    },
    required: ['param']
  },
  handler: 'myHandler'
})
```

### æ›´å¤šèµ„æº

- ğŸ“– [æ’ä»¶SDKå®Œæ•´æ–‡æ¡£](./docs/PLUGIN_SDK_DESIGN.md)
- ğŸ“– [APIå‚è€ƒ](./packages/README.md)
- ğŸ’¡ [ç¤ºä¾‹æ’ä»¶](./plugins/cloudflare-v2/)

---

## ğŸ†˜ è·å–å¸®åŠ©

### æ–‡æ¡£
- [æŠ€æœ¯æ–‡æ¡£](./docs/)
- [APIå‚è€ƒ](./packages/README.md)
- [å®æ–½è¿›åº¦](./docs/IMPLEMENTATION_PROGRESS.md)

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Ÿ**
```
A: è®¾ç½® â†’ æœåŠ¡å™¨ç®¡ç† â†’ æ·»åŠ æœåŠ¡å™¨
   è¾“å…¥æœåŠ¡å™¨åœ°å€ã€ç«¯å£å’Œè®¤è¯ä»¤ç‰Œ
```

**Q: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ**
```
A: æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰æ—¥å¿—æŸ¥çœ‹åŠŸèƒ½ï¼š
   - å¤‡ä»½ç®¡ç†ï¼šç‚¹å‡»å¤‡ä»½è®°å½•çš„"æ—¥å¿—"æŒ‰é’®
   - è®¡åˆ’ä»»åŠ¡ï¼šç‚¹å‡»æ‰§è¡Œè®°å½•çš„"æŸ¥çœ‹è¾“å‡º"æŒ‰é’®
   - åº”ç”¨å•†åº—ï¼šæŸ¥çœ‹åº”ç”¨è¯¦æƒ…ä¸­çš„æ—¥å¿—
```

**Q: å¦‚ä½•æ›´æ–°åº”ç”¨ï¼Ÿ**
```
A: å¸®åŠ© â†’ æ£€æŸ¥æ›´æ–°
   æˆ–è®¿é—® GitHub Releases ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
```

### åé¦ˆé—®é¢˜

å¦‚æœé‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ–‡æ¡£å’Œå¸¸è§é—®é¢˜
2. åœ¨GitHubä¸Šæäº¤Issue
3. åŠ å…¥ç¤¾åŒºè®¨è®º

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å·²ç»äº†è§£äº†ServerHub v2.0çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¼€å§‹ä½¿ç”¨å§ï¼

1. âœ… åˆ›å»ºç¬¬ä¸€ä¸ªå¤‡ä»½ç­–ç•¥
2. âœ… è®¾ç½®ç¬¬ä¸€ä¸ªè®¡åˆ’ä»»åŠ¡
3. âœ… éƒ¨ç½²ç¬¬ä¸€ä¸ªåº”ç”¨
4. âœ… å¼€å‘ç¬¬ä¸€ä¸ªæ’ä»¶

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸš€

---

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¥æœŸ**: 2026-02-06  
**æ–‡æ¡£**: [å®Œæ•´æ–‡æ¡£](./docs/)
